<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>DevConf 2014 | DeltaSpike &ndash; CDI extensions of the world, unite!</title>

        <meta name="description" content="Several popular CDI extension frameworks like Seam 3 and MyFaces CODI have faded out over the years. But not to worry - their functionality is taken over by projects like Picketlink, Agorava, and mainly DeltaSpike, a new Apache project that wants CDI extension authors to unite in an effort to make the life of web application developers easier. Even without a five year plan!">
        <meta name="author" content="Matous Jobanek, Ron Smeral">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.min.css">
        <link rel="stylesheet" href="css/theme/default.css" id="theme">

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- If the query includes 'print-pdf', use the PDF print sheet -->
        <script>
            document.write('<link rel="stylesheet" href="css/print/' + (window.location.search.match(/print-pdf/gi) ? 'pdf' : 'paper') + '.css" type="text/css" media="print">');
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
        <style>
            div.seam {
                background: #007777 !important;
            }

            div.codi {
                background: #995500 !important;
            }

            div.deltaspike {
                background: #993377 !important;
            }

            div.other-framework {
                background: #333333 !important;
            }

            div.inactive {
                opacity: 0.25;
            }

            div.module-box {
                display: inline-block;
                font-size: 0.6em;
                padding: 10px;
                line-height: 1em;
                box-shadow: 2px 2px 6px 0 rgba(0,0,0,0.2);
                border-radius: 10px;
                width: 140px;
            }

            div.invisible {
                visibility: hidden;
            }

            div.module-box.title {
                display: inline-block;
                margin-left: auto;
                margin-right: auto;
                margin-bottom: 25px;
            }

            div.code-annotation {
                font-size: 0.55em;
                text-align: left;
                padding-bottom: 0;
                margin-bottom: -8px;
                line-height: 1em;
                width: 90%;
                color: #808080;
                display: block;
                margin-left: auto;
                margin-right: auto;
            }

            pre.code-overlay {
                box-shadow: none;
                position: absolute;
                width: 100%;
            }

            pre[class~=code-overlay] + pre:not([class~=code-overlay]) {
                margin-top: 25px;
            }

            code.code_title{
                font-size:28px;
            }
            
            /* demo */
            
            /* hide scrollbar */
            #your-tweets-wrapper {
                overflow: hidden;
            }
            #your-tweets {
                overflow-y: scroll;
                width: 100%;
                height: 600px;
                padding-right: 20px;
            }
            
            div.tweet {
                background: rgba(0,0,0,0.4);
                border-radius: 15px;
                text-align: left;
                margin: 10px;
            }
            
            span.tweet-username {
                font-size: 0.8em;
                color: #666666;
                display: inline-block;
                padding-left: 15px;
            }
            
            p.tweet-text {
                font-size: 0.9em;
                display: inline-block;
                width: 80%;
                vertical-align: top;
                padding-top: 15px;
            }
            
            .tweet img {
                height: 80px;
                width: 80px;
                margin:20px !important;
                border-radius: 10px;
                border-color: #999999 !important;
            }

        </style>
    </head>

    <body>
        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">

                <section id="title">
                    <h1>DeltaSpike</h1>
                    <h3>CDI extensions of the world, unite!</h3>
                    <p>
                        <small>DevConf 2014</small>
                    </p>
                </section>

                <section id="us">
                    <h2>Us</h2>

                    <div class="fragment" style="width: 600px; display: inline-block; text-align: left; margin-bottom: 20px;">
                        <img src="img/ron.jpg" style="float: left; margin-right:20px" width="100"/>
                        <div style="padding-top: 10px;">
                            Ron Šmeral<br/>
                            <small><a href="http://github.com/rsmeral">@rsmeral</a></small><br />
                            <small>Seam QE at RH | Seam, Weld, DeltaSpike</small><br />
                        </div>
                    </div><!--
                    --><br /><!--
                    --><div class="fragment" style="width: 600px; display: inline-block; text-align: left;">
                        <img src="img/matous.jpg" style="float: left; margin-right:20px" width="100"/>
                        <div style="padding-top: 10px;">
                            Matouš Jobánek<br/>
                            <small><a href="http://github.com/MatousJobanek">@MatousJobanek</a></small><br />
                            <small>WFK QE at RH | beer, mountains</small>
                        </div>
                    </div>
                </section>

                <section id="cdi-stack">
                    <section id="cdi-title">
                        <h1>CDI</h1>
                    </section>

                    <section id="cdi-1">
                        <h2>CDI</h2>
                        <p>Contexts and Dependency Injection</p>
                        <p class="fragment">Weld, OWB, CanDI</p>
                        <p class="fragment">Type-safe resolution, Scopes</p>
                        <pre class="fragment" style="width: 98%; display: inline-block;"><code data-trim class="java">
public class UserController {

    @Inject @User
    public Repository repo;
</code></pre>
                        <pre class="fragment" style="width: 49%; display: inline-block;"><code data-trim class="java">
@SessionScoped @User
class UserRepo implements Repository {

...
</code></pre>
                        <pre class="fragment" style="width: 49%; display: inline-block;"><code data-trim class="java">
class Repositories {

    @Produces @SessionScoped @User
    public Repository getUserRepo() {
</code></pre>
                    </section>

                    <section id="cdi-2">
                        <h2>CDI</h2>
                        <p>Interceptors</p>
                        <pre class="fragment" style="width: 98%; display: inline-block;"><code data-trim class="java">
public class Account {
...
    @Audited
    public void changePassword(Credentials c) {

...
</code></pre>
                        <pre class="fragment" style="width: 98%; display: inline-block;"><code data-trim class="java">
@Interceptor @Audited
public class AuditInterceptor {
    
    @AroundInvoke
    public logOperation() {
...
</code></pre>
                    </section>

                    <section id="cdi-3">
                        <h2>CDI</h2>
                        <p>Events</p>
                        <pre class="fragment" style="width: 98%; display: inline-block;"><code data-trim class="java">
public void updatePasswordExpiryDate(@Observes @Changed Credentials) {
...
</code></pre>
                        <pre class="fragment" style="width: 98%; display: inline-block;"><code data-trim class="java">
@Inject @Changed Event&lt;Credentials&gt; changeEvent;

public changePassword(Credentials c) {
    ...
    changeEvent.fire(c);
</code></pre>
                    </section>
                </section>

                <section id="cdi-ext">
                    <h2>CDI extensions</h2>
                    <p>SPI for integration with other technologies<br /><small>Seam, Spring, GWT, ...</small></p>
                    <!--<p class="fragment">ServiceLoader pattern<br /><small>META-INF/services</small></p>-->
                    <p class="fragment">Custom scopes<br /><small><code>@PageScope, @BusinessProcessScope</code></small></p>
                    <p class="fragment">Provide beans, augment existing beans</p>
                    <p class="fragment">Catch system events for deployment phases<br /><small>before/after deployment, per bean, per injection point</small></p>
                </section>

                <section id="cdi-existing-ext">
                    <h2>Existing extensions</h2>
                    <p class="fragment">Integrations with other frameworks</p>
                    <p class="fragment">PicketLink, RestEasy, Agorava, &hellip;</p>
                    <br />
                    <h3 class="fragment">Frameworks</h3>
                    <p class="fragment">zk, SoftwareMill, &hellip;</p>
                    <p class="fragment current-visible">Seam 3, MyFaces CODI</p>
                    <p class="fragment current-visible" style="display: none"></p>
                    <p class="fragment current-visible">Unite</p>
                </section>

                <section data-transition="fade" id="deltaspike-intro">
                    <h2>DeltaSpike</h2>
                    <div>
                        <div style="width: 200px; display: inline-block">
                            <div class="module-box deltaspike">Core</div>
                            <div class="module-box deltaspike">Data</div>
                            <div class="module-box deltaspike">JPA</div>
                            <div class="module-box deltaspike">BeanVal</div>
                            <div class="module-box deltaspike">Partial Bean</div>
                            <div class="module-box deltaspike">Scheduler</div>
                            <div class="module-box deltaspike">Test Control</div>
                            <div class="module-box deltaspike">Servlet</div>
                            <div class="module-box deltaspike">JSF</div>
                            <div class="module-box deltaspike">Security</div>
                            <div class="module-box invisible">spacer</div>
                            <div class="module-box invisible">spacer</div>
                        </div>
                        <div style="width: 600px; text-align: left; display: inline-block; vertical-align: top; margin-top: 10px">
                            <div>
                                <h3 style="display:inline" class="fragment">What?</h3>
                                <p style="display: inline-block; vertical-align: top" class="fragment">CDI extension framework</p>
                            </div>
                            <br/>
                            <div>
                                <h3 style="display:inline" class="fragment">Why?</h3>
                                <p style="display: inline-block; vertical-align: top" class="fragment">Unite efforts</p>
                            </div>
                            <br/>
                            <div>
                                <h3 style="display:inline" class="fragment">Who?</h3>
                                <p style="display: inline-block; vertical-align: top" class="fragment">Apache committers<br />Seam developers<br />other CDI ext. authors</p>
                            </div>
                            <br/>
                            <div>
                                <h3 style="display:inline" class="fragment">When?</h3>
                                <p style="display: inline-block; vertical-align: top" class="fragment">now: 0.6-SNAPSHOT<br /><i>soon:</i> 1.0</p>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- DUMMY SECTION, FIX HEIGHT + TRANSITION HELPER -->
                <section data-transition="fade" id="cdi-frameworks-transition-helper">
                    <h2>Frameworks</h2>
                    <div class="invisible">
                        <p><img src="img/seam.png" width="45"  style="border: none; background: none; box-shadow: none; margin: 0 10px 0 0; vertical-align: bottom" />JBoss Seam 3</p>
                        <div>
                            <div class="module-box seam">Solder</div>
                            <div class="module-box seam">Config</div>
                            <div class="module-box seam">Catch</div>
                            <div class="module-box seam">Security</div>
                            <div class="module-box seam">Social</div>
                            <div class="module-box seam">Mail</div>
                            <div class="module-box seam">Transaction</div>
                            <div class="module-box seam">Render</div>
                            <div class="module-box seam">Cron</div>
                            <div class="module-box seam">Reports</div>
                            <div class="module-box seam">Remoting</div>
                            <div class="module-box seam">Rest</div>
                            <div class="module-box seam">JMS</div>
                            <div class="module-box seam">Persistence</div>
                            <div class="module-box seam">Validation</div>
                            <div class="module-box seam">Servlet</div>
                            <div class="module-box seam">Wicket</div>
                            <div class="module-box seam">Drools</div>
                            <div class="module-box seam">jBPM</div>
                            <div class="module-box seam">Faces</div>
                            <div class="module-box invisible">nothing</div>
                            <div class="module-box seam">Spring</div>
                            <div class="module-box seam">JCR</div>
                        </div>
                    </div>
                    <div class="invisible">
                        <p style="margin-top: 30px;"><img src="img/codi.png" width="40"  style="border: none; background: none; box-shadow: none; margin: 0 10px 0 0; vertical-align: bottom" />MyFaces CODI</p>
                        <div>
                            <div class="module-box codi">Core</div>
                            <div class="module-box codi">JSF</div>
                            <div class="module-box codi">BV</div>
                            <div class="module-box codi">JPA</div>
                            <div class="module-box codi">Message</div>
                        </div>
                    </div>
                    <div class="invisible">
                        <p style="margin-top: 30px;">Other</p>
                        <div>
                            <div class="module-box other-framework">cdi-query</div>
                        </div>
                    </div>
                </section>

                <section data-transition="none" id="cdi-frameworks">
                    <h2>Frameworks</h2>
                    <div class="fragment">
                        <p><img src="img/seam.png" width="45"  style="border: none; background: none; box-shadow: none; margin: 0 10px 0 0; vertical-align: bottom" />JBoss Seam 3</p>
                        <div>
                            <div class="module-box seam">Solder</div>
                            <div class="module-box seam">Config</div>
                            <div class="module-box seam">Catch</div>
                            <div class="module-box seam">Security</div>
                            <div class="module-box seam">Social</div>
                            <div class="module-box seam">Mail</div>
                            <div class="module-box seam">Transaction</div>
                            <div class="module-box seam">Render</div>
                            <div class="module-box seam">Cron</div>
                            <div class="module-box seam">Reports</div>
                            <div class="module-box seam">Remoting</div>
                            <div class="module-box seam">Rest</div>
                            <div class="module-box seam">JMS</div>
                            <div class="module-box seam">Persistence</div>
                            <div class="module-box seam">Validation</div>
                            <div class="module-box seam">Servlet</div>
                            <div class="module-box seam">Wicket</div>
                            <div class="module-box seam">Drools</div>
                            <div class="module-box seam">jBPM</div>
                            <div class="module-box seam">Faces</div>
                            <div class="module-box invisible">nothing</div>
                            <div class="module-box seam">Spring</div>
                            <div class="module-box seam">JCR</div>
                        </div>
                    </div>
                    <div  class="fragment">
                        <p style="margin-top: 30px;"><img src="img/codi.png" width="40"  style="border: none; background: none; box-shadow: none; margin: 0 10px 0 0; vertical-align: bottom" />MyFaces CODI</p>
                        <div>
                            <div class="module-box codi">Core</div>
                            <div class="module-box codi">JSF</div>
                            <div class="module-box codi">BV</div>
                            <div class="module-box codi">JPA</div>
                            <div class="module-box codi">Message</div>
                        </div>
                    </div>
                    <div  class="fragment">
                        <p style="margin-top: 30px;">Other</p>
                        <div>
                            <div class="module-box other-framework">cdi-query</div>
                        </div>
                    </div>
                </section>

                <section data-transition="none" id="deltaspike-friends">
                    <h2><span style="color: #993377">&#9632;</span> DeltaSpike &amp; <span style="color: #333333">&#9632;</span> friends</h2>
                    <div>
                        <p style="opacity: 0.3"><img src="img/seam.png" width="45"  style="border: none; background: none; box-shadow: none; margin: 0 10px 0 0; vertical-align: bottom" />JBoss Seam 3</p>
                        <div>
                            <div class="module-box deltaspike">Core</div>
                            <div class="module-box other-framework">Aries</div>
                            <div class="module-box deltaspike">Core</div>
                            <div class="module-box deltaspike">Security</div>
                            <div class="module-box other-framework">Agorava</div>
                            <div class="module-box invisible">Mail</div>
                            <div class="module-box deltaspike">JPA</div>
                            <div class="module-box invisible">Render</div>
                            <div class="module-box deltaspike">Scheduler</div>
                            <div class="module-box invisible">Reports</div>
                            <div class="module-box invisible">Remoting</div>
                            <div class="module-box other-framework">RestEasy</div>
                            <div class="module-box other-framework">JMS 2.0</div>
                            <div class="module-box other-framework">JTA 1.1</div>
                            <div class="module-box deltaspike">beanval</div>
                            <div class="module-box deltaspike">Servlet</div>
                            <div class="module-box other-framework">Wicket</div>
                            <div class="module-box other-framework">Drools</div>
                            <div class="module-box invisible">jBPM</div>
                            <div class="module-box deltaspike">JSF</div>
                            <div class="module-box deltaspike">Test-Control</div>
                            <div class="module-box deltaspike">PartialBean</div>
                            <div class="module-box invisible">Spring</div>
                            <div class="module-box other-framework">ModeShape</div>
                            <div class="module-box invisible">spacer</div>
                        </div>
                    </div>
                    <div>
                        <p style="opacity: 0.3; margin-top: 30px;"><img src="img/codi.png" width="40"  style="border: none; background: none; box-shadow: none; margin: 0 10px 0 0; vertical-align: bottom" />MyFaces CODI</p>
                        <div>
                            <div class="module-box deltaspike">Core</div>
                            <div class="module-box deltaspike">JSF</div>
                            <div class="module-box deltaspike">beanval</div>
                            <div class="module-box deltaspike">JPA</div>
                            <div class="module-box deltaspike">Core</div>
                        </div>
                    </div>
                    <div>
                        <p style="opacity: 0.3; margin-top: 30px;">Other</p>
                        <div>
                            <div class="module-box deltaspike">Data</div>
                        </div>
                    </div>
                </section>

                <section data-transition="fade" id="deltaspike-modules-intro">
                    <h2>DeltaSpike</h2>
                    <div style="width: 200px; display: inline-block">
                        <div class="module-box deltaspike">Core</div>
                        <div class="module-box deltaspike">Data</div>
                        <div class="module-box deltaspike">JPA</div>
                        <div class="module-box deltaspike">BeanVal</div>
                        <div class="module-box deltaspike">Partial Bean</div>
                        <div class="module-box deltaspike">Scheduler</div>
                        <div class="module-box deltaspike">Test Control</div>
                        <div class="module-box deltaspike">Servlet</div>
                        <div class="module-box deltaspike">JSF</div>
                        <div class="module-box deltaspike">Security</div>
                        <div class="module-box other-framework">Agorava</div>
                        <div class="module-box other-framework">PicketLink</div>
                    </div>
                </section>

                <section data-transition="fade" id="deltaspike-modules-allocation-ron">
                    <h2>DeltaSpike</h2>
                    <div>
                        <div style="width: 200px; display: inline-block">
                            <div class="module-box deltaspike">Core</div>
                            <div class="module-box deltaspike">Data</div>
                            <div class="module-box deltaspike inactive">JPA</div>
                            <div class="module-box deltaspike">BeanVal</div>
                            <div class="module-box deltaspike">Partial Bean</div>
                            <div class="module-box deltaspike inactive">Scheduler</div>
                            <div class="module-box deltaspike inactive">Test Control</div>
                            <div class="module-box deltaspike inactive">Servlet</div>
                            <div class="module-box deltaspike inactive">JSF</div>
                            <div class="module-box deltaspike inactive">Security</div>
                            <div class="module-box other-framework inactive">Agorava</div>
                            <div class="module-box other-framework inactive">PicketLink</div>
                        </div>
                    </div>
                </section>

                <section id="deltaspike-core-stack">

                    <section id="ds-core-exceptions">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">Core</div>
                        <p>Features for extension authors and users</p>
                        <p class="fragment" data-fragment-index="0">Exceptions as events</p>
                        <pre style="position: absolute; width: 100%" class="fragment" data-fragment-index="1">
<code class="java">

...
try {
    doSomethingNasty();
} catch(TooNastyException ex) {
    logger.log("something nasty happened");
}
</code></pre>

                        <pre style="position: absolute; width: 100%" class="fragment code-overlay" data-fragment-index="2">
<code class="java">@Inject
private Event&lt;ExceptionToCatchEvent&gt; exEvt;
...
try {
    doSomethingNasty();
} catch(TooNastyException ex) {
    exEvt.fire(new ExceptionToCatchEvent(ex));
}
</code></pre>
                        <!-- overlay helper spacer -->
                        <pre style="width: 100%; visibility: hidden">
<code class="java">







</code></pre>

                        <pre class="fragment" style="width: 100%;" data-fragment-index="3"><code data-trim class="java">
@ExceptionHandler
public class LoggingHandler {
    void logException(@BeforeHandles ExceptionEvent&lt;Exception&gt; evt) {
</code></pre>
                        <pre class="fragment" style="position: absolute; width: 100%;" data-fragment-index="4"><code data-trim class="java">
@ExceptionHandler
public class NastinessHandler {
    void spank(@Handles ExceptionEvent&lt;TooNastyException&gt; evt) {
</code></pre>
                    </section>

                    <section id="ds-core-messages">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">Core</div>
                        <div>
                            <p>Type-safe messages</p>
                            <pre><code data-trim class="java">
@MessageBundle
public interface AppMessages {

    @MessageTemplate("Hello, %s!")
    String hello(String name);

    @MessageTemplate("{greeting}")
    String greet(String greeting, String name);
</code></pre>
                        </div>
                        <div class="fragment">
                            <div class="code-annotation">AppMessages.properties</div>
                            <pre><code data-trim>
greeting=%s, %s!
</code></pre>
                        </div>
                        <div class="fragment">
                            <div class="code-annotation">Usage</div>
                            <pre><code data-trim class="java">
@Inject AppMessages msg;
...
msg.greet("Hello", "DevConf");
msg.hello("World");
</code></pre>
                        </div>

                    </section>

                    <section id="ds-core-projectstage-resources">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">Core</div>
                        <div>
                            <p>ProjectStage, conditional bean exclusion</p>
                            <pre><code data-trim class="java">
@Exclude(exceptIfProjectStage=IntegrationTest.class)
public class TestUserRepository { ...
</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Resource loading</p>
                            <pre><code data-trim class="java">
@Inject
@ExternalResource("schedule.xml")
private InputStream inputStream;

@Inject
@ExternalResource("api-keys.properties")
private Properties apiKeys;
</code></pre>
                        </div>
                    </section>

                </section>

                <section id="deltaspike-beanval">

                    <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                    <div class="module-box deltaspike title">BeanVal</div>
                    <p>CDI in bean validators</p>
                    <pre style="position: absolute; width: 100%" class="fragment" data-fragment-index="1"><code data-trim class="java">
class RegistrationAction {


    String chosenName;
    
    void register() {
        ...
    }
}
</code></pre>

                    <pre style="position: absolute; width: 100%" class="code-overlay fragment" data-fragment-index="2"><code data-trim class="java">
class RegistrationAction {

    @NotTaken
    String chosenName;
    
    void register() {
        ...
    }
}
</code></pre>

                    <pre style="visibility: hidden; margin: 0; width: 100%"><code class="java">




    




</code></pre>

                    <pre class="fragment" style="width: 100%" data-fragment-index="2"><code data-trim class="java">
class UserNameValidator implements ConstraintValidator&lt;NotTaken, String&gt; {

    @Inject
    UserRepository userRepo;

    boolean isValid(String s, ConstraintValidatorContext cvc) {
        return userRepo.findByName(s) == null;
    }
}
</code></pre>


                </section>

                <section id="deltaspike-data-stack">

                    <section id="ds-data-intro">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">Data</div>
                        <br />
                        <pre style="font-size: 0.2em; display: inline-block; width: 49%; overflow: hidden; letter-spacing: 0.05em" class="fragment ds-zoom-in" id="ds-data-frag-jdbc"><code style="overflow: hidden" data-trim class="java">
public class PersonRepository {

    private Connection conn;

    private static final String BY_ID = "SELECT * FROM Person WHERE id = ?";
    private static final String BY_NAME = "SELECT * FROM Person WHERE firstName LIKE ? AND lastName LIKE ?'";
    private static final String STORE = "INSERT INTO Person(firstName,lastName,birthDate) VALUES(?,?,?)";
    private static final String UPDATE = "UPDATE Person SET firstName = ?, lastName = ?, birthDate = ?";
    private static final String REMOVE = "DELETE FROM Person WHERE id = ?";
    
    private PreparedStatement findByIdStmt;
    private PreparedStatement findByNameStmt;
    private PreparedStatement storeStmt;
    private PreparedStatement updateStmt;
    private PreparedStatement removeStmt;

    public PersonRepository() {
        try {
            Class.forName("com.mysql.jdbc.Driver");
            conn = DriverManager.getConnection("jdbc:mysql://localhost/people", "user", "pass");
            findByIdStmt = conn.prepareStatement(BY_ID);
            findByNameStmt = conn.prepareStatement(BY_NAME);
            storeStmt = conn.prepareStatement(STORE);
            updateStmt = conn.prepareStatement(UPDATE);
            removeStmt = conn.prepareStatement(REMOVE);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(PersonRepository.class.getName()).log(Level.SEVERE, null, ex);
        } catch (SQLException ex) {
            Logger.getLogger(PersonRepository.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public Person find(Long id) {
        try {
            findByIdStmt.setLong(1, id);
            ResultSet rs = findByIdStmt.executeQuery();
            if (rs.next()) {
                String firstName = rs.getString("firstName");
                String lastName = rs.getString("lastName");
                Date birthDate = new Date(rs.getDate("birthDate").getTime());
                return new Person(firstName, lastName, birthDate);
            }
        } catch (SQLException ex) {
            Logger.getLogger(PersonRepository.class.getName()).log(Level.SEVERE, null, ex);
        }
        return null;
    }

    public List&lt;Person&gt; findByName(String first, String last) {
        try {
            findByNameStmt.setString(1, "%" + first + "%");
            findByNameStmt.setString(1, "%" + last + "%");
            ResultSet rs = findByNameStmt.executeQuery();
            List&lt;Person&gt; people = new ArrayList&lt;Person&gt;();
            while (rs.next()) {
                Long id = rs.getLong("id");
                String firstName = rs.getString("firstName");
                String lastName = rs.getString("lastName");
                Date birthDate = new Date(rs.getDate("birthDate").getTime());
                people.add(new Person(id, firstName, lastName, birthDate));
            }
            return people;
        } catch (SQLException ex) {
            Logger.getLogger(PersonRepository.class.getName()).log(Level.SEVERE, null, ex);
        }
        return null;
    }

    public Long store(Person p) {
        try {
            storeStmt.setString(1, p.getFirstName());
            storeStmt.setString(2, p.getLastName());
            storeStmt.setDate(3, new java.sql.Date(p.getBirthDate().getTime()));
            storeStmt.executeUpdate();
            return storeStmt.getGeneratedKeys().getLong(1);
        } catch (SQLException ex) {
            Logger.getLogger(PersonRepository.class.getName()).log(Level.SEVERE, null, ex);
        }
        return null;
    }

    public void update(Person p) {
        try {
            updateStmt.setString(1, p.getFirstName());
            updateStmt.setString(2, p.getLastName());
            updateStmt.setDate(3, new java.sql.Date(p.getBirthDate().getTime()));
            updateStmt.executeUpdate();
        } catch (SQLException ex) {
            Logger.getLogger(PersonRepository.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public void remove(Person p) {
        try {
            removeStmt.setLong(1, p.getId());
            removeStmt.executeUpdate();
        } catch (SQLException ex) {
            Logger.getLogger(PersonRepository.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
}
</code></pre>
                        <div style="display: none" class="fragment ds-zoom-out"></div>
                        <pre style="display: inline-block; width: 49%; font-size: 0.4em; vertical-align: top" class="fragment ds-zoom-in" id="ds-data-frag-jpa"><code style="overflow: hidden" data-trim class="java">
@Stateful
@ConversationScoped
public class PersonRepository {
   
    @PersistenceContext(type = PersistenceContextType.EXTENDED)
    private EntityManager em;

    public void persist(Person p) {
        em.persist(p);
        em.flush();
    }

    public void remove(Person p) {
        em.remove(p);
        em.flush();
    }

    public List&lt;Person&gt; getAllPeople() {
        return em.createQuery("SELECT p FROM Person p").getResultList();
    }

    public List&lt;Person&gt; findByName(String name) {
        return em.createQuery("SELECT p From Person p WHERE p.name LIKE :name")
                 .setParameter("name", name).getResultList();
    }
}
</code></pre>
                        <div style="display: none" class="fragment ds-zoom-out"></div>

                        <pre style="width: 99%; margin-top: 0; font-size: 0.7em" class="fragment ds-zoom-out" id="ds-data-frag-ds"><code data-trim class="java">
@Repository
public interface PersonRepository 
extends EntityRepository&lt;Person, Long&gt; {}
</code></pre>           
                    </section>

                    <section id="ds-data-features">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">Data</div>
                        <p>Data repositories made simple</p>
                        <div class="fragment">
                            <p>Method name DSL</p>
                            <pre><code data-trim class="java">
List&lt;Person&gt; findByNameLikeAndAgeBetweenAndGender(
    String name, int minAge, int maxAge, Gender gender);
</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Query as annotation</p>
                            <pre><code data-trim class="java">
@Query("SELECT p from Person p where p.birthDate = ?1")
Person findByBirthDate(Date d);
</code></pre>
                        </div>
                    </section>

                    <section id="ds-data-features-more">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">Data</div>
                        <div>
                            <p>Auditing API</p>
<!--                            <pre><code data-trim class="java">
@ModifiedOn
@Temporal(TemporalType.TIMESTAMP)
private Date updated;

@ModifiedBy
private String auditUser;
</code></pre>-->
                        </div>

                        <div>
                            <p>Criteria API support</p>
                            <p>Query Delegate &ndash; custom DSL</p>
                            <p>DTO mapping</p>
                            <p>Pagination</p>
                            <p>...</p>
                        </div>
                    </section>

                </section>

                <!--                <section id="deltaspike-jpa">
                                    
                                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                                        <div class="module-box deltaspike title">JPA</div>
                
                                </section>-->

                <section id="deltaspike-partialbean">

                    <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                    <div class="module-box deltaspike title">Partial Bean</div>
                    <p>Single dynamic implementation for bean interfaces</p>

                    <div style="width:1030px; position: absolute;">
                        <pre class="fragment" style="width: 680px; display: inline-block" data-fragment-index="1"><code class="java">
public interface PersonQueryService {

    @QueryMethod("select p from Person p order by p.name")
    public List&lt;Person&gt; findAllSortedByName();
    ...
</code></pre>

                        <pre class="fragment" style="display: inline-block; width: 330px; margin-left: 10px" data-fragment-index="3"><code class="java">
@PartialBeanBinding
@Target(TYPE)
@Retention(RUNTIME)
@interface QueryService {}

</code></pre>
                    </div>       
                    <pre class="fragment code-overlay" style="width: 680px; margin-left: 2px" data-fragment-index="2"><code data-trim class="java">
@QueryService
public interface PersonQueryService {

    @QueryMethod("select p from Person p order by p.name")
    public List&lt;Person&gt; findAllSortedByName();
    ...
</code></pre>

                    <pre style="visibility: hidden; margin: 0; width: 70%"><code class="java">






</code></pre>

                    <pre class="fragment" style="width: 1030px;" data-fragment-index="2"><code data-trim class="java">
@QueryService
public class QueryServicePartialBean implements InvocationHandler {
    
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        String query = method.getAnnotation(QueryMethod.class);
        ...
</code></pre>
                </section>
<!--
                <section id="deltaspike-scheduler">

                    <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                    <div class="module-box deltaspike title">Scheduler</div>
                    <p>cron syntax, Quartz robustness, CDI awareness</p>
                    <pre class="fragment" style="width: 100%"><code data-trim class="java">
@Scheduled(cronExpression = "0 0 * */2 * ?")
public class BackupJob implements org.quartz.Job {

    @Inject @Backup
    private Store store;

    void execute(JobExecutionContext context) throws JobExecutionException {
</code></pre>

                    <pre class="fragment" style="width: 100%"><code data-trim class="java">
@Inject
Scheduler&lt;Job&gt; scheduler;

private void registerJobs() {
    scheduler.registerNewJob(BackupJob.class);
</code></pre>
                </section>-->

                                <!-- Matous -->

                <section data-transition="fade" id="deltaspike-modules-allocation-matous">
                    <h2>DeltaSpike</h2>
                    <div>
                        <div style="width: 200px; display: inline-block">
                            <div class="module-box deltaspike inactive">Core</div>
                            <div class="module-box deltaspike inactive">Data</div>
                            <div class="module-box deltaspike inactive">JPA</div>
                            <div class="module-box deltaspike inactive">BeanVal</div>
                            <div class="module-box deltaspike inactive">Partial Bean</div>
                            <div class="module-box deltaspike inactive">Scheduler</div>
                            <div class="module-box deltaspike inactive">Test Control</div>
                            <div class="module-box deltaspike inactive">Servlet</div>
                            <div class="module-box deltaspike">JSF</div>
                            <div class="module-box deltaspike">Security</div>
                            <div class="module-box other-framework">PicketLink</div>
                            <div class="module-box other-framework">Agorava</div>
                        </div>
                    </div>
                </section>

                <section id="deltaspike-jsf-stack">

                    <section id="ds-jsf-type-save">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">JSF</div>
                        <p class="fragment">Type-safe view-configs</p>
                        <div class="fragment">
                            <table width="1160px"><TR><TD width="820px" style="font-size:42px;">
                                        <pre><code data-trim class="java">
@Folder
public interface Pages {

    @View(name = "home")
    class Index implements ViewConfig { }

    @Folder
    interface Admin extends ViewConfig {

        @View
        class Index implements Admin { }
    }
}
                    </code></pre>
                                    </TD><TD width="440px">
                                        <div class="fragment">
                                            <code style="font-size:27px">
                                                /pages/<br>    
                                                /pages/home.xhtml<br>
                                                /pages/admin/<br>
                                                /pages/admin/index.xhtml<br>
                                            </code>
                                        </div>
                                    </TD></TR>
                            </table>
                        </div>
                    </section>

                    <section id="ds-jsf-an-nav-par">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">JSF</div>
                        <p>Navigation</p>
                        <div style="margin-left:-120px; position: absolute; width: 100%" class="code-overlay fragment" data-fragment-index="1">
                            <pre style="width: 1070px; font-size:25px;"><code data-trim class="java">
@Model
public interface Pages extends ViewConfig {


    class Home implements Pages { }

    class Index implements Pages { }
}</code></pre>
                        </div>

			<div style="margin-left:-120px; position: absolute; width: 100%" class="code-overlay fragment" data-fragment-index="2">
                            <pre style="width: 1070px; font-size:25px;"><code style="min-height: 450px" data-trim class="java">
@Model
public interface Pages extends ViewConfig {


    class Home implements Pages { }

    class Index implements Pages {


        public Class&lt;? extends ViewConfig&gt; actionMethod() {

                return Pages.Home.class;
        }
    }
}</code></pre>
                        </div>

			<div style="margin-left:-120px; position: absolute; width: 100%" class="code-overlay fragment" data-fragment-index="3">
                            <pre style="width: 1070px; font-size:25px;"><code style="min-height: 450px" data-trim class="java">
@Model
public interface Pages extends ViewConfig {


    class Home implements Pages { }

    class Index implements Pages {

        @NavigationParameter(key = "param", value = "#{myBean.property}")
        public Class&lt;? extends ViewConfig&gt; actionMethod() {

                return Pages.Home.class;
        }
    }
}</code></pre>
                        </div>

			<div style="margin-left:-120px; position: absolute; width: 100%" class="code-overlay fragment" data-fragment-index="4">
                            <pre style="width: 1070px; font-size:25px;"><code style="min-height: 450px" data-trim class="java">
@Model
public interface Pages extends ViewConfig {

    @View(viewParams = INCLUDE)
    class Home implements Pages { }

    class Index implements Pages {

        @NavigationParameter(key = "param", value = "#{myBean.property}")
        public Class&lt;? extends ViewConfig&gt; actionMethod() {

                return Pages.Home.class;
        }
    }
}</code></pre>
                        </div>

                    </section>

                    <!--<section id="ds-jsf-an-view-con-ref">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">JSF</div>
                        <p>View-Controller Callbacks</p>
                        <br>
                        <div class="fragment">
                            <p style="font-size:30px; width: 1200px; margin-left:-100px;"><code>@InitView, @PreViewAction, @PreRenderView and @PostRenderView</code></p>
                        </div>
                        <div class="fragment">
                            <pre style="font-size:25px;"><code data-trim class="java">
@ViewControllerRef(MyPageController.class)
public class MyPage implements ViewConfig { }

@Model
public class MyPageController {

    @PreRenderView
    protected void load() {
        //...
    }
}
                </code></pre>
                        </div>
                    </section>-->
                </section>

                <section id="deltaspike-security-stack">

                    <section id="ds-security-method">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">Security</div>
			<p class="fragment">Securing method invocation</p>
                        <code class="fragment code_title">@SecurityBindingType</code>
                        <br>
                        <div class="fragment">
                            <pre style="font-size:25px;"><code data-trim class="java">
@Retention(value = RUNTIME)
@Target({TYPE, METHOD})
@Documented
@SecurityBindingType
public @interface CustomSecurityBinding {
}
                    </code></pre>
                        </div>
                    </section>

                    <section id="ds-security-an-bind-auth">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">Security</div>
			<br />
                        <code class="code_title">@CustomSecurityBinding</code>

		<!--First slide with code example for secure method invocation-->

                        <div style="position: absolute; width: 100%" class="code-overlay fragment" data-fragment-index="1">
                            <pre style="font-size:25px;"><code class="java">
public void doSomething(Thing thing) {

    thing.doSomething();
}</code></pre>
                        <br>
                            <pre style="margin-left:-50px; width: 1060px; font-size:25px;"><code class="java">

public boolean doSecCheck(InvocationContext invCont, @LoggedIn User user)
    throws Exception {

    return user.isLoggedIn(); // perform security check
}</code></pre>
                    </div>
		
		<!--Second slide with code example for secure method invocation-->

			<div style="position: absolute; width: 100%" class="code-overlay fragment" data-fragment-index="2">
                            <pre style="font-size:25px;"><code data-trim class="java">
@CustomSecurityBinding
public void doSomething(Thing thing) {

    thing.doSomething();
}
                    </code></pre>
                        <br>
                            <pre style="margin-left:-50px; width: 1060px; font-size:25px;"><code class="java">
@CustomSecurityBinding
public boolean doSecCheck(InvocationContext invCont, @LoggedIn User user)
    throws Exception {

    return user.isLoggedIn(); // perform security check
}</code></pre>
                    </div>

		<!--Third slide with code example for secure method invocation-->

			<div style="position: absolute; width: 100%" class="code-overlay fragment" data-fragment-index="3">
                            <pre style="font-size:25px;"><code data-trim class="java">
@CustomSecurityBinding
public void doSomething(Thing thing) {

    thing.doSomething();
}
                    </code></pre>
                        <br>
                            <pre style="margin-left:-50px; width: 1060px; font-size:25px;"><code data-trim class="java">
@Secures
@CustomSecurityBinding
public boolean doSecCheck(InvocationContext invCont, @LoggedIn User user)
    throws Exception {

    return user.isLoggedIn(); // perform security check
}
                    	</code></pre>
                    </div>



                    </section>

                    <section id="ds-security-classes">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">Security</div>
                        <p>Securing access to Java classes</p>
                        <code class="fragment code_title">@Secured(AccessDecisionVoter.class)</code>
                        <br>
                        <div class="fragment">
                            <pre style="font-size:25px;"><code data-trim class="java">
@Secured(CustomAccessDecisionVoter.class)
public class SecuredBean {

    //...
}
                </code></pre>
                            <div class="fragment">
                                <pre style="font-size:25px;"><code data-trim class="java">
public class Bean {

    @Secured(CustomAccessDecisionVoter.class)
    public String securedMethod() {

        //...
    }
}
                    </code></pre>
                            </div>
                        </div>
                    </section>

                    <section id="ds-security-jsf-int">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">Security</div> + <div class="module-box deltaspike title">JSF</div>
                        <p>Integration with JSF module</p>
                        <div style="position: absolute; width: 100%" class="code-overlay fragment" data-fragment-index="1">
                            <pre style="font-size:25px;"><code class="java">
public interface Pages extends ViewConfig {

    class Index implements Pages { }


    interface Admin extends Pages {

                class Manage implements Admin { }

                class Home implements Admin { }
    }
}</code></pre>
                        </div>

			<div style="position: absolute; width: 100%" class="code-overlay fragment" data-fragment-index="2">
                            <pre style="font-size:25px;"><code data-trim class="java">
@Secured(EmployeeAccessDecisionVoter.class)
public interface Pages extends ViewConfig {

    class Index implements Pages { }

    @Secured(AdminAccessDecisionVoter.class)    
    interface Admin extends Pages {

                class Manage implements Admin { }

                class Home implements Admin { }
    }
}
                    </code></pre>
                        </div>

                    </section>
		</section>

		<section id="seam-and-pl">
			<section id="seam-security">
				<h2 style="margin: 0; padding: 0">Seam Security</h2>
				<br />
				<br />
				<div class="module-box deltaspike title fragment" style="height: 60px; font-size:28px; margin-right:100px; vertical-align:middle;">DeltaSpike Security</div> 
				<div class="module-box title fragment" style="background-color: #006600; height: 60px; font-size:29px; margin-left:100px; vertical-align:middle; line-height: 60px;">PicketLink</div>
			</section>

			<section id="picketlink">
                        <h2 style="margin: 0 50px 0 0; padding: 0"><img src="img/picketlinkLogo.png" style="margin: 0px 0px -10px 0px; border:0px; background:transparent; box-shadow: 0 0 0;" width="100"/>PicketLink</h2>
			<br />
			<div style="text-align: left; display: inline-block; vertical-align: top;">
				<p class="fragment">Application Security Framework for Java EE applications</p>
				<div>
					<p style="display:inline" class="fragment">Provided features: </p>
					<div style="display: inline-block; vertical-align: top; margin-left:10px;"><p class="fragment">authenticating users</p><p class="fragment">authorizing access</p><p class="fragment">managing of users, groups, roles,..</p><p class="fragment">plus much more...</p></div>
				<div>
				<p class="fragment">Integrates DeltaSpike Security</p>
				<p class="fragment">The simplest solution for Seam / DeltaSpike based apps</p>
			</div>
                    </section>

                </section>

                <section id="agorava-stack">

                    <section id="agorava-intro">
                        <h2 style="margin: 0 50px 0 0; padding: 0"><img src="img/agoravaLogo.png" style="margin: 0px 0px -15px 0px; border:0px; background:transparent; box-shadow: 0 0 0;" width="110"/>Agorava</h2>
			<br />
			<div style="text-align: left; display: inline-block; vertical-align: top; margin-top: 10px">
                            <div>
                                <h3 style="display:inline" class="fragment">What?</h3>
                                <p style="display: inline-block; vertical-align: top" class="fragment">CDI extension framework<br />Originally Seam Social</p>
                            </div>
                            <br/>
                            <div>
                                <h3 style="display:inline" class="fragment">Why?</h3>
                                <p style="display: inline-block; vertical-align: top" class="fragment">To deal with Social Media<br/>based on OAuth</p>
                            </div>
                            <br/>
                            <div>
                                <h3 style="display:inline" class="fragment">Who?</h3>
                                <p style="display: inline-block; vertical-align: top" class="fragment">JBoss committers<br />other CDI ext. authors</p>
                            </div>
                            <br/>
                            <div>
                                <h3 style="display:inline" class="fragment">When?</h3>
                                <p style="display: inline-block; vertical-align: top" class="fragment">version: 0.7.0<br/><font size="5px">Nov 20, 2013</font></p>
                            </div>
                        </div>
                    </section>

		<section id="agorava-provides">
                        <h2 style="margin: 0; padding: 0">Agorava &ndash; What is on the menu?</h2>
			<br />
			<p class="fragment">A generic API to deal with OAuth 1.0a and 2.0 services</p>
			<p class="fragment">Specific API for Twitter<img src="img/Twitter.png"  style="margin: 0px 0px -2px 3px; border:0px;" width="30"/>, Facebook<img src="img/Facebook.png" style="margin: 0px 0px -2px 3px; border:0px;" width="30"/> and LinkedIn<img src="img/LinkedIn.png" style="margin: 0px 0px -2px 3px; border:0px;" width="30"/></p>
			<p class="fragment">API to retrieve basic user information from a Social Service</p>
			<p class="fragment">SPI to extend Agorava with new modules for new services</p>
			<p class="fragment">and much more ...</p>
		</section>

		<section id="agorava-how-settings">
                        <h2 style="margin: 0; padding: 0">Agorava &ndash; How?</h2>
			<br />
			<p class="fragment">1. Declare your OAuth application on the Social Media web site</p>
			<p class="fragment">2. Get OAuth app keys</p>
			<div class="fragment" style="margin-left:-30px;">
				<p>3. Produce it with a CDI producer:</p>
				<pre style="font-size:25px; width:1025px;"><code data-trim class="java">
@ApplicationScoped
@Produces
@Twitter
@OAuthApplication(params = {@Param(name = PREFIX, value = "twitter")})
public OAuthAppSettings twitterSettings;
				</code></pre>
				<br />
				<p style="font-size:28px; text-align:left;">agorava.properties :</p>
				<pre style="font-size:25px; margin-left:0px;"><code data-trim class="java">
twitter.apiKey = your_key
twitter.apiSecret = your_secret_key
				</code></pre>
			</div>
			
		</section>

		<section id="agorava-how-dance">
                        <h2 style="margin: 0; padding: 0">Agorava</h2>
			<br />
			<p>OAuth authorization</p>
			<div class="fragment" style="margin-left:-30px;">
				<pre style="font-size:25px; width:1020px;"><code data-trim class="java">
@Inject
OAuthLifeCycleService lifeCycleService;

String authURL = lifeCycelService.startDanceFor(Twitter.class);
				</code></pre>
			</div>
			
		</section>

		<section id="agorava-how-time">
                        <h2 style="margin: 0; padding: 0">Agorava</h2>
			<br />
			<p>Wanna work with user's info?</p>
			<div class="fragment" style="margin-left:-30px;">
				<pre style="font-size:25px; width:1020px;"><code data-trim class="java">
@Inject
@Twitter
TwitterUserService userService;

public void handleUserInfo() {

        userService.getProfileId();
        userService.getScreenName();
        //...
    }
				</code></pre>
			</div>
			
		</section>

		<section id="agorava-how-tweet" data-state="prepare-tweets">
                        <h2 style="margin: 0; padding: 0">Agorava</h2>
			<br />
			<p>Send tweet?</p>
			<div class="fragment" style="margin-left:-30px;">
				<pre style="font-size:25px; width:1020px;"><code data-trim class="java">
@Inject
@Twitter
TwitterTimelineService tl;

public Tweet sendTweet(String msg) {

        return tl.updateStatus(msg);
    }
				</code></pre>
			</div>
			
		</section>

	</section>

                <!-- FINAL SLIDES -->

                <section id="agorava-twitter-demo">

                    <h2>Your tweets</h2>
                    <!-- AJAX polling or websocket served feed of twitter timeline for @rsmeral #devconf 
                         Agorava-backed poll of twitter timeline -->
                    <div id="your-tweets-wrapper">
                        <div id="your-tweets">
                            Loading tweets...
                        </div>
                    </div>
                </section>

                <section id="final-contribute">
                    <h2>How can I contribute?</h2>
                    <div class="fragment">
			<div>
				<h3>DeltaSpike</h3>
				<p>
				<small><a href="https://git-wip-us.apache.org/repos/asf/deltaspike.git">https://git-wip-us.apache.org/repos/asf/deltaspike.git</a></small><br />
				<small><a href="https://issues.apache.org/jira/browse/DELTASPIKE">https://issues.apache.org/jira/browse/DELTASPIKE</a></small><br />
				<small>{users,dev}@deltaspike.apache.org</small>
				</p>
                    	</div>
			<div>
				<h3>PicketLink</h3>
				<p>
				<small><a href="https://github.com/picketlink">https://github.com/picketlink</a></small><br />
				<small><a href="https://issues.jboss.org/browse/PLINK">https://issues.jboss.org/browse/PLINK</a></small><br />
				</p>
			</div>
			<div>
				<h3>Agorava</h3>
				<p>
				<small><a href="https://github.com/agorava">https://github.com/agorava</a></small><br />
				<small><a href="https://issues.apache.org/jira/browse/DELTASPIKE">https://issues.jboss.org/browse/AGOVA</a></small><br />
				</p>
			</div>
		    </div>
                </section>
                
                <section id="final-questions">
                    <p>Slides at <a href="https://github.com/rsmeral/devconf2014">https://github.com/rsmeral/devconf2014</a></p>
                    <img  class="fragment" src="img/got_questions_logo.png" style="border: none; background: none; box-shadow: none;" height="300" />
                </section>

                <section id="final-thanks-feedback">
                    <h2>Thank you</h2>
                    <div>
                        <p>Feedback?</p>
                        <div>
                            <p><a href="http://devconf.cz/f/72">http://devconf.cz/f/72</a></p>
                            <img src="img/feedback_qr.png" width="300" />
                            <p>Slides at <a href="https://github.com/rsmeral/devconf2014">https://github.com/rsmeral/devconf2014</a></p>
                            <p><small>Made with <a href="http://lab.hakim.se/reveal-js/">reveal.js</a></small></p>
                        </div>
                    </div>
                </section>

            </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.min.js"></script>
        <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

        <script>

            // demo
            var POLL_URL="http://devconf-nzr.rhcloud.com/devconf2014-demo/tweets";// "http://localhost:8080/devconf2014-demo/tweets";
            var pollSeconds = 10;
            var pollTimeout;

            function renderTweets(data) {
                var items = [];
                $.each(data, function(key, val) {
                    items.push("<div class='tweet'><img src='"+ val.avatarUrl +"' /><p class='tweet-text'>" + val.text.replace("\n"," ") + "<span class='tweet-username'>@" + val.username + "</span></p></div>" );
                });
                
                $("#your-tweets").html(items.join(""));
            }
            
            function pollTweets() {
                $.getJSON(POLL_URL, renderTweets);
            }
            
            function startPollingTweets() {
                clearTimeout(pollTimeout);
                pollTweets();
                pollTimeout = setTimeout(startPollingTweets, pollSeconds*1000);
            }
            
            Reveal.addEventListener('prepare-tweets', function(event) {
                startPollingTweets();
            } );

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: false,
                progress: true,
                history: true,
                center: true,
                theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
                transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none
                transitionSpeed: 'fast', // default/fast/slow

                // Parallax scrolling
                // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
                // parallaxBackgroundSize: '2100px 900px',

                // Optional libraries used to extend on reveal.js
                dependencies: [
//                    { src: 'socket.io/socket.io.js', async: true },
//                    { src: 'plugin/notes-server/client.js', async: true },
                    {src: 'lib/js/classList.js', condition: function() {
                            return !document.body.classList;
                        }},
                    {src: 'plugin/markdown/marked.js', condition: function() {
                            return !!document.querySelector('[data-markdown]');
                        }},
                    {src: 'plugin/markdown/markdown.js', condition: function() {
                            return !!document.querySelector('[data-markdown]');
                        }},
                    {src: 'plugin/highlight/highlight.js', async: true, callback: function() {
                            hljs.initHighlightingOnLoad();
                        }},
                    {src: 'plugin/zoom-js/zoom.js', async: true, condition: function() {
                            return !!document.body.classList;
                        }},
                    {src: 'plugin/notes/notes.js', async: true, condition: function() {
                            return !!document.body.classList;
                        }}
                ],
                keyboard: {
                    13: 'next', // go to the next slide when the ENTER key is pressed
                    68: startPollingTweets // 'd' to launch demo
                }
            });
            
            // zoom in on a fragment which contains ds-zoom-in class
            Reveal.addEventListener( 'fragmentshown', function( event ) {
                if(event.fragment.classList.contains("ds-zoom-in")) {
                    zoom.to({element: event.fragment});
                }
                if(event.fragment.classList.contains("ds-zoom-out")) {
                    zoom.out();
                }
            } );
        </script>

    </body>
</html>
